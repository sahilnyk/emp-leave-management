{% extends "base_app.html" %}
{% block content %}

<style>
.metric-card{
 background:white;
 border-radius:10px;
 padding:14px;
 border:1px solid #e5e7eb;
 box-shadow:0 4px 16px rgba(0,0,0,0.06);
}
.metric-title{
 font-size:11px;
 color:#6b7280;
 margin-bottom:2px;
}
.metric-value{
 font-size:20px;
 font-weight:700;
 color:#111827;
}

.section-title{
 font-size:13px;
 font-weight:700;
 margin-top:10px;
 color:#111827;
}

.badge{
 font-size:11px;
}

.btn-slate{
 border-radius:6px;
 padding:6px 12px;
 border:none;
 font-size:12px;
 width:auto;
 color:#fff;
 background-image:linear-gradient(#4fb2d3, #309bbf);
 border-left:1px solid #2c8eaf;
 border-right:1px solid #2c8eaf;
}
.btn-slate:hover{
 background-image:linear-gradient(#4fb2d3, #309bbf);
}
</style>


<h6 class="mb-1">Employee Dashboard</h6>
<p style="font-size:11px;color:#6b7280">Welcome {{ user.username }}</p>


<div class="row g-3">

 <div class="col-md-4">
  <div class="metric-card">
   <div class="metric-title">Total Leave Balance</div>
   <div class="metric-value">{{ balance.total_balance }} Days</div>
  </div>
 </div>

 <div class="col-md-4">
  <div class="metric-card">
   <div class="metric-title">Used Leaves</div>
   <div class="metric-value">{{ total_used }} Days</div>
  </div>
 </div>

 <div class="col-md-4">
  <div class="metric-card"
   style="border-left:4px solid
   {% if remaining <= 5 %}#ef4444
   {% elif remaining <= 10 %}#eab308
   {% else %}#22c55e{% endif %}">
   <div class="metric-title">Remaining Balance</div>
   <div class="metric-value">{{ remaining }} Days</div>
  </div>
 </div>

</div>


<div class="section-title">Leave Breakdown</div>

<div class="row g-3">

 <div class="col-md-4">
  <div class="metric-card">
   <div class="metric-title">Sick Leave Used</div>
   <div class="metric-value">{{ balance.sick_used }}</div>
  </div>
 </div>

 <div class="col-md-4">
  <div class="metric-card">
   <div class="metric-title">Casual Leave Used</div>
   <div class="metric-value">{{ balance.casual_used }}</div>
  </div>
 </div>

 <div class="col-md-4">
  <div class="metric-card">
   <div class="metric-title">Other Leave Used</div>
   <div class="metric-value">{{ balance.other_used }}</div>
  </div>
 </div>

</div>



<div class="section-title">Recent Leave Requests</div>

{% if leaves %}
<div class="card p-2 shadow-sm border">
<table class="table table-sm mb-0 align-middle">
<thead style="font-size:12px">
<tr>
<th>Type</th>
<th>From</th>
<th>To</th>
<th>Status</th>
</tr>
</thead>

<tbody style="font-size:12px">
{% for l in leaves %}
<tr>
<td>{{ l.leave_type|title }}</td>
<td>{{ l.start_date }}</td>
<td>{{ l.end_date }}</td>

<td>
{% if l.status == "approved" %}
<span class="badge bg-success">Approved</span>
{% elif l.status == "rejected" %}
<span class="badge bg-danger">Rejected</span>
{% else %}
<span class="badge bg-warning text-dark">Pending</span>
{% endif %}
</td>

</tr>
{% endfor %}
</tbody>
</table>
</div>

{% else %}
<div class="alert alert-secondary mt-2" style="font-size:12px">
No recent requests
</div>
{% endif %}



<div class="section-title">Actions</div>

<div class="row g-3">

 <div class="col-md-3">
  <div class="card p-2 shadow-sm">
   <small style="font-size:11px;color:#374151">Apply for Leave</small>
   <button class="btn-slate mt-2" onclick="window.location.href='/leaves/apply/'">
    Apply
   </button>
  </div>
 </div>

 <div class="col-md-3">
  <div class="card p-2 shadow-sm">
   <small style="font-size:11px;color:#374151">View My Requests</small>
   <button class="btn-slate mt-2" onclick="window.location.href='/leaves/my/'">
    View
   </button>
  </div>
 </div>

</div>

{% endblock %}
